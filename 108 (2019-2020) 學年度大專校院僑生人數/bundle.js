(function () {
  'use strict';

  const width = window.innerWidth,
        height = window.innerHeight,
        maxRadius = (Math.min(width, height) / 2) - 5;

  const formatNumber = d3.format(',d');
  const formatPercent = d3.format(".1%");

  const x = d3.scaleLinear()
        .range([0, 2 * Math.PI])
        .clamp(true);

  const y = d3.scaleSqrt()
        .range([maxRadius*.1, maxRadius]);

  const color = d3.scaleOrdinal(d3.schemeCategory20c);

  const partition = d3.partition();

  let totalSize = 0;

  const arc = d3.arc()
        .startAngle(d => x(d.x0))
        .endAngle(d => x(d.x1+d.x0))
        .innerRadius(d => Math.max(0, y(d.y0)))
        .outerRadius(d => Math.max(0, y(d.y1)));

  const middleArcLine = d => {
        const halfPi = Math.PI/2;
        const angles = [x(d.x0) - halfPi, x(d.x1) - halfPi];
        const r = Math.max(0, (y(d.y0) + y(d.y1)) / 2);

        const middleAngle = (angles[1] + angles[0]) / 2;
        const invertDirection = middleAngle > 0 && middleAngle < Math.PI;
        if (invertDirection) { angles.reverse(); }

          const path = d3.path();
          path.arc(0, 0, r, angles[0], angles[1], invertDirection);
          return path.toString();
  };

  const textFits = d => {
        const CHAR_SPACE = 6;

        const deltaAngle = x(d.x1) - x(d.x0);
        const r = Math.max(0, (y(d.y0) + y(d.y1)) / 2);
        const perimeter = r * deltaAngle;

        return d.data.name.length * CHAR_SPACE < perimeter;
  };

  const svg = d3.select('body').append('svg')
  			.attr("height",'420').attr("width",'950')
  			/*.call(d3.zoom().on("zoom", function () {
      	   svg.attr("transform", d3.event.transform)
      	}))*/
        .attr('viewBox', `${-width /2} ${-height / 2} ${width} ${height}`)
        .on("click", function() {
            focusOn();// Reset zoom on canvas click
  					/*svg.selectAll('g.slice')  // For new circle, go through the update process
              //.data(dataset)
              .on("mouseover", {
              	text(children.size)
            	})
  					*/
          });
  			//.on('click', () => focusOn()); // Reset zoom on canvas click


  d3.json('hw.json', (error, root) => {
        if (error) throw error;
    
        root = d3.hierarchy(root);
        root.sum(d => d.size);
    		totalSize = root.sum;

        const slice = svg.selectAll('g.slice')
            .data(partition(root).descendants());

        slice.exit().remove();

        const newSlice = slice.enter()
            .append('g').attr('class', 'slice')
            .on('click', d => {
                d3.event.stopPropagation();
                focusOn(d);
              	/*on("mouseover", {
              		.text(d.value);
            		})*/
            });

        newSlice.append('title')
            .text(d => d.data.name + '\n' + formatNumber(d.value) + '\n' + formatPercent((d.value)/(12562)));

        newSlice.append('path')
            .attr('class', 'main-arc')
            .style('fill', d => color((d.children ? d : d.parent).data.name))
            .attr('d', arc);

        newSlice.append('path')
            .attr('class', 'hidden-arc')
            .attr('id', (_, i) => `hiddenArc${i}`)
            .attr('d', middleArcLine);

        const text = newSlice.append('text')
        		//.attr("transform", transform)
            .attr('display', d => textFits(d) ? null : 'none')
    				.style('font-size', '8px')
      			.style('font-style', '微軟正黑體');

        // Add white contour
        text.append('textPath')
            .attr('startOffset','50%')
            .attr('xlink:href', (_, i) => `#hiddenArc${i}` )
            .text(d => d.data.name)
            .style('fill', 'none')
            .style('stroke', '#fff')
            .style('stroke-width', 5)
            .style('stroke-linejoin', 'round');

        text.append('textPath')
            .attr('startOffset','50%')
            .attr('xlink:href', (_, i) => `#hiddenArc${i}` )
            .text(d => d.data.name);
  });
  function focusOn(d = { x0: 0, x1: 1, y0: 0, y1: 1 }) {
        // Reset to top-level if no data point specified
    
        const transition = svg.transition()
        		
            .duration(1000)
            .tween('scale', () => {
              	const xd = d3.interpolate(x.domain(), [d.x0, d.x1]),
                      yd = d3.interpolate(y.domain(), [d.y0, 1]);
                      return t => { x.domain(xd(t)); y.domain(yd(t)); };
            });

              transition.selectAll('path.main-arc')
                  .attrTween('d', d => () => arc(d));

              transition.selectAll('path.hidden-arc')
                  .attrTween('d', d => () => middleArcLine(d));

              transition.selectAll('text')
                  .attrTween('display', d => () => textFits(d) ? null : 'none');

              moveStackToFront(d);


        function moveStackToFront(elD) {
            svg.selectAll('.slice').filter(d => d === elD)
                .each(function(d) {
                this.parentNode.appendChild(this);
                if (d.parent) { moveStackToFront(d.parent); }
                });
        }
  }

}());

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGgsXG4gICAgICBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgICBtYXhSYWRpdXMgPSAoTWF0aC5taW4od2lkdGgsIGhlaWdodCkgLyAyKSAtIDU7XG5cbmNvbnN0IGZvcm1hdE51bWJlciA9IGQzLmZvcm1hdCgnLGQnKTtcbmNvbnN0IGZvcm1hdFBlcmNlbnQgPSBkMy5mb3JtYXQoXCIuMSVcIik7XG5cbmNvbnN0IHggPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgICAucmFuZ2UoWzAsIDIgKiBNYXRoLlBJXSlcbiAgICAgIC5jbGFtcCh0cnVlKTtcblxuY29uc3QgeSA9IGQzLnNjYWxlU3FydCgpXG4gICAgICAucmFuZ2UoW21heFJhZGl1cyouMSwgbWF4UmFkaXVzXSk7XG5cbmNvbnN0IGNvbG9yID0gZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZUNhdGVnb3J5MjBjKTtcblxuY29uc3QgcGFydGl0aW9uID0gZDMucGFydGl0aW9uKCk7XG5cbmxldCB0b3RhbFNpemUgPSAwO1xuXG5jb25zdCBhcmMgPSBkMy5hcmMoKVxuICAgICAgLnN0YXJ0QW5nbGUoZCA9PiB4KGQueDApKVxuICAgICAgLmVuZEFuZ2xlKGQgPT4geChkLngxK2QueDApKVxuICAgICAgLmlubmVyUmFkaXVzKGQgPT4gTWF0aC5tYXgoMCwgeShkLnkwKSkpXG4gICAgICAub3V0ZXJSYWRpdXMoZCA9PiBNYXRoLm1heCgwLCB5KGQueTEpKSk7XG5cbmNvbnN0IG1pZGRsZUFyY0xpbmUgPSBkID0+IHtcbiAgICAgIGNvbnN0IGhhbGZQaSA9IE1hdGguUEkvMjtcbiAgICAgIGNvbnN0IGFuZ2xlcyA9IFt4KGQueDApIC0gaGFsZlBpLCB4KGQueDEpIC0gaGFsZlBpXTtcbiAgICAgIGNvbnN0IHIgPSBNYXRoLm1heCgwLCAoeShkLnkwKSArIHkoZC55MSkpIC8gMik7XG5cbiAgICAgIGNvbnN0IG1pZGRsZUFuZ2xlID0gKGFuZ2xlc1sxXSArIGFuZ2xlc1swXSkgLyAyO1xuICAgICAgY29uc3QgaW52ZXJ0RGlyZWN0aW9uID0gbWlkZGxlQW5nbGUgPiAwICYmIG1pZGRsZUFuZ2xlIDwgTWF0aC5QSTtcbiAgICAgIGlmIChpbnZlcnREaXJlY3Rpb24pIHsgYW5nbGVzLnJldmVyc2UoKTsgfVxuXG4gICAgICAgIGNvbnN0IHBhdGggPSBkMy5wYXRoKCk7XG4gICAgICAgIHBhdGguYXJjKDAsIDAsIHIsIGFuZ2xlc1swXSwgYW5nbGVzWzFdLCBpbnZlcnREaXJlY3Rpb24pO1xuICAgICAgICByZXR1cm4gcGF0aC50b1N0cmluZygpO1xufTtcblxuY29uc3QgdGV4dEZpdHMgPSBkID0+IHtcbiAgICAgIGNvbnN0IENIQVJfU1BBQ0UgPSA2O1xuXG4gICAgICBjb25zdCBkZWx0YUFuZ2xlID0geChkLngxKSAtIHgoZC54MCk7XG4gICAgICBjb25zdCByID0gTWF0aC5tYXgoMCwgKHkoZC55MCkgKyB5KGQueTEpKSAvIDIpO1xuICAgICAgY29uc3QgcGVyaW1ldGVyID0gciAqIGRlbHRhQW5nbGU7XG5cbiAgICAgIHJldHVybiBkLmRhdGEubmFtZS5sZW5ndGggKiBDSEFSX1NQQUNFIDwgcGVyaW1ldGVyO1xufTtcblxuY29uc3Qgc3ZnID0gZDMuc2VsZWN0KCdib2R5JykuYXBwZW5kKCdzdmcnKVxuXHRcdFx0LmF0dHIoXCJoZWlnaHRcIiwnNDIwJykuYXR0cihcIndpZHRoXCIsJzk1MCcpXG5cdFx0XHQvKi5jYWxsKGQzLnpvb20oKS5vbihcInpvb21cIiwgZnVuY3Rpb24gKCkge1xuICAgIFx0ICAgc3ZnLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZDMuZXZlbnQudHJhbnNmb3JtKVxuICAgIFx0fSkpKi9cbiAgICAgIC5hdHRyKCd2aWV3Qm94JywgYCR7LXdpZHRoIC8yfSAkey1oZWlnaHQgLyAyfSAke3dpZHRofSAke2hlaWdodH1gKVxuICAgICAgLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZm9jdXNPbigpOy8vIFJlc2V0IHpvb20gb24gY2FudmFzIGNsaWNrXG5cdFx0XHRcdFx0Lypzdmcuc2VsZWN0QWxsKCdnLnNsaWNlJykgIC8vIEZvciBuZXcgY2lyY2xlLCBnbyB0aHJvdWdoIHRoZSB1cGRhdGUgcHJvY2Vzc1xuICAgICAgICAgICAgLy8uZGF0YShkYXRhc2V0KVxuICAgICAgICAgICAgLm9uKFwibW91c2VvdmVyXCIsIHtcbiAgICAgICAgICAgIFx0dGV4dChjaGlsZHJlbi5zaXplKVxuICAgICAgICAgIFx0fSlcblx0XHRcdFx0XHQqL1xuICAgICAgICB9KVxuXHRcdFx0Ly8ub24oJ2NsaWNrJywgKCkgPT4gZm9jdXNPbigpKTsgLy8gUmVzZXQgem9vbSBvbiBjYW52YXMgY2xpY2tcblxuXG5kMy5qc29uKCdody5qc29uJywgKGVycm9yLCByb290KSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICBcbiAgICAgIHJvb3QgPSBkMy5oaWVyYXJjaHkocm9vdCk7XG4gICAgICByb290LnN1bShkID0+IGQuc2l6ZSk7XG4gIFx0XHR0b3RhbFNpemUgPSByb290LnN1bTtcblxuICAgICAgY29uc3Qgc2xpY2UgPSBzdmcuc2VsZWN0QWxsKCdnLnNsaWNlJylcbiAgICAgICAgICAuZGF0YShwYXJ0aXRpb24ocm9vdCkuZGVzY2VuZGFudHMoKSk7XG5cbiAgICAgIHNsaWNlLmV4aXQoKS5yZW1vdmUoKTtcblxuICAgICAgY29uc3QgbmV3U2xpY2UgPSBzbGljZS5lbnRlcigpXG4gICAgICAgICAgLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ3NsaWNlJylcbiAgICAgICAgICAub24oJ2NsaWNrJywgZCA9PiB7XG4gICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICBmb2N1c09uKGQpO1xuICAgICAgICAgICAgXHQvKm9uKFwibW91c2VvdmVyXCIsIHtcbiAgICAgICAgICAgIFx0XHQudGV4dChkLnZhbHVlKTtcbiAgICAgICAgICBcdFx0fSkqL1xuICAgICAgICAgIH0pO1xuXG4gICAgICBuZXdTbGljZS5hcHBlbmQoJ3RpdGxlJylcbiAgICAgICAgICAudGV4dChkID0+IGQuZGF0YS5uYW1lICsgJ1xcbicgKyBmb3JtYXROdW1iZXIoZC52YWx1ZSkgKyAnXFxuJyArIGZvcm1hdFBlcmNlbnQoKGQudmFsdWUpLygxMjU2MikpKTtcblxuICAgICAgbmV3U2xpY2UuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbWFpbi1hcmMnKVxuICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGQgPT4gY29sb3IoKGQuY2hpbGRyZW4gPyBkIDogZC5wYXJlbnQpLmRhdGEubmFtZSkpXG4gICAgICAgICAgLmF0dHIoJ2QnLCBhcmMpO1xuXG4gICAgICBuZXdTbGljZS5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdoaWRkZW4tYXJjJylcbiAgICAgICAgICAuYXR0cignaWQnLCAoXywgaSkgPT4gYGhpZGRlbkFyYyR7aX1gKVxuICAgICAgICAgIC5hdHRyKCdkJywgbWlkZGxlQXJjTGluZSk7XG5cbiAgICAgIGNvbnN0IHRleHQgPSBuZXdTbGljZS5hcHBlbmQoJ3RleHQnKVxuICAgICAgXHRcdC8vLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtKVxuICAgICAgICAgIC5hdHRyKCdkaXNwbGF5JywgZCA9PiB0ZXh0Rml0cyhkKSA/IG51bGwgOiAnbm9uZScpXG4gIFx0XHRcdFx0LnN0eWxlKCdmb250LXNpemUnLCAnOHB4JylcbiAgICBcdFx0XHQuc3R5bGUoJ2ZvbnQtc3R5bGUnLCAnw6XCvsKuw6jCu8Kfw6bCrcKjw6nCu8KRw6nCq8KUJyk7XG5cbiAgICAgIC8vIEFkZCB3aGl0ZSBjb250b3VyXG4gICAgICB0ZXh0LmFwcGVuZCgndGV4dFBhdGgnKVxuICAgICAgICAgIC5hdHRyKCdzdGFydE9mZnNldCcsJzUwJScpXG4gICAgICAgICAgLmF0dHIoJ3hsaW5rOmhyZWYnLCAoXywgaSkgPT4gYCNoaWRkZW5BcmMke2l9YCApXG4gICAgICAgICAgLnRleHQoZCA9PiBkLmRhdGEubmFtZSlcbiAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAnbm9uZScpXG4gICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCAnI2ZmZicpXG4gICAgICAgICAgLnN0eWxlKCdzdHJva2Utd2lkdGgnLCA1KVxuICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlLWxpbmVqb2luJywgJ3JvdW5kJyk7XG5cbiAgICAgIHRleHQuYXBwZW5kKCd0ZXh0UGF0aCcpXG4gICAgICAgICAgLmF0dHIoJ3N0YXJ0T2Zmc2V0JywnNTAlJylcbiAgICAgICAgICAuYXR0cigneGxpbms6aHJlZicsIChfLCBpKSA9PiBgI2hpZGRlbkFyYyR7aX1gIClcbiAgICAgICAgICAudGV4dChkID0+IGQuZGF0YS5uYW1lKTtcbn0pO1xuZnVuY3Rpb24gZm9jdXNPbihkID0geyB4MDogMCwgeDE6IDEsIHkwOiAwLCB5MTogMSB9KSB7XG4gICAgICAvLyBSZXNldCB0byB0b3AtbGV2ZWwgaWYgbm8gZGF0YSBwb2ludCBzcGVjaWZpZWRcbiAgXG4gICAgICBjb25zdCB0cmFuc2l0aW9uID0gc3ZnLnRyYW5zaXRpb24oKVxuICAgICAgXHRcdFxuICAgICAgICAgIC5kdXJhdGlvbigxMDAwKVxuICAgICAgICAgIC50d2Vlbignc2NhbGUnLCAoKSA9PiB7XG4gICAgICAgICAgICBcdGNvbnN0IHhkID0gZDMuaW50ZXJwb2xhdGUoeC5kb21haW4oKSwgW2QueDAsIGQueDFdKSxcbiAgICAgICAgICAgICAgICAgICAgeWQgPSBkMy5pbnRlcnBvbGF0ZSh5LmRvbWFpbigpLCBbZC55MCwgMV0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PiB7IHguZG9tYWluKHhkKHQpKTsgeS5kb21haW4oeWQodCkpOyB9O1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0cmFuc2l0aW9uLnNlbGVjdEFsbCgncGF0aC5tYWluLWFyYycpXG4gICAgICAgICAgICAgICAgLmF0dHJUd2VlbignZCcsIGQgPT4gKCkgPT4gYXJjKGQpKTtcblxuICAgICAgICAgICAgdHJhbnNpdGlvbi5zZWxlY3RBbGwoJ3BhdGguaGlkZGVuLWFyYycpXG4gICAgICAgICAgICAgICAgLmF0dHJUd2VlbignZCcsIGQgPT4gKCkgPT4gbWlkZGxlQXJjTGluZShkKSk7XG5cbiAgICAgICAgICAgIHRyYW5zaXRpb24uc2VsZWN0QWxsKCd0ZXh0JylcbiAgICAgICAgICAgICAgICAuYXR0clR3ZWVuKCdkaXNwbGF5JywgZCA9PiAoKSA9PiB0ZXh0Rml0cyhkKSA/IG51bGwgOiAnbm9uZScpO1xuXG4gICAgICAgICAgICBtb3ZlU3RhY2tUb0Zyb250KGQpO1xuXG5cbiAgICAgIGZ1bmN0aW9uIG1vdmVTdGFja1RvRnJvbnQoZWxEKSB7XG4gICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnLnNsaWNlJykuZmlsdGVyKGQgPT4gZCA9PT0gZWxEKVxuICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzKTtcbiAgICAgICAgICAgICAgaWYgKGQucGFyZW50KSB7IG1vdmVTdGFja1RvRnJvbnQoZC5wYXJlbnQpOyB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICB9XG59Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztFQUFBLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxVQUFVO0VBQy9CLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxXQUFXO0VBQ2pDLE1BQU0sU0FBUyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNwRDtFQUNBLE1BQU0sWUFBWSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7RUFD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LE1BQU0sTUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQzNDLE1BQU0sTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDckQsTUFBTSxNQUFNLFNBQVMsR0FBRyxDQUFDLEdBQUcsVUFBVSxDQUFDO0FBQ3ZDO0VBQ0EsTUFBTSxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxVQUFVLEdBQUcsU0FBUyxDQUFDO0VBQ3pELENBQUMsQ0FBQztBQUNGO0VBQ0EsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO0VBQzNDLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztFQUM1QztFQUNBO0VBQ0E7RUFDQSxPQUFPLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7RUFDeEUsT0FBTyxFQUFFLENBQUMsT0FBTyxFQUFFLFdBQVc7RUFDOUIsVUFBVSxPQUFPLEVBQUUsQ0FBQztFQUNwQjtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQSxTQUFTLEVBQUM7RUFDVjtBQUNBO0FBQ0E7RUFDQSxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLEtBQUs7RUFDcEMsTUFBTSxJQUFJLEtBQUssRUFBRSxNQUFNLEtBQUssQ0FBQztFQUM3QjtFQUNBLE1BQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDaEMsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDNUIsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztBQUN6QjtFQUNBLE1BQU0sTUFBTSxLQUFLLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7RUFDNUMsV0FBVyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7QUFDL0M7RUFDQSxNQUFNLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUM1QjtFQUNBLE1BQU0sTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLEtBQUssRUFBRTtFQUNwQyxXQUFXLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztFQUM3QyxXQUFXLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxJQUFJO0VBQzVCLGNBQWMsRUFBRSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztFQUN6QyxjQUFjLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN6QjtFQUNBO0VBQ0E7RUFDQSxXQUFXLENBQUMsQ0FBQztBQUNiO0VBQ0EsTUFBTSxRQUFRLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQztFQUM5QixXQUFXLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNHO0VBQ0EsTUFBTSxRQUFRLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztFQUM3QixXQUFXLElBQUksQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDO0VBQ3BDLFdBQVcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDM0UsV0FBVyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzFCO0VBQ0EsTUFBTSxRQUFRLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztFQUM3QixXQUFXLElBQUksQ0FBQyxPQUFPLEVBQUUsWUFBWSxDQUFDO0VBQ3RDLFdBQVcsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNoRCxXQUFXLElBQUksQ0FBQyxHQUFHLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFDcEM7RUFDQSxNQUFNLE1BQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO0VBQzFDO0VBQ0EsV0FBVyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLE1BQU0sQ0FBQztFQUM1RCxPQUFPLEtBQUssQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDO0VBQ2hDLFFBQVEsS0FBSyxDQUFDLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNyQztFQUNBO0VBQ0EsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQztFQUM3QixXQUFXLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDO0VBQ3BDLFdBQVcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRTtFQUMxRCxXQUFXLElBQUks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